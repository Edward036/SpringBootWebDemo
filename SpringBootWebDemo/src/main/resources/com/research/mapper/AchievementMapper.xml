<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- <mapper namespace="com.car.dao.StudentMapper"> -->
<mapper namespace="com.research.mapper.AchievementMapper">

	<cache></cache>

	<resultMap type="com.research.model.Achievement" id="AchievementResult">
			<id property="id" column="id"/>
			<result property="projectName" column="project_name"/>
			<result property="projectMan" column="project_man"/>
			<result property="awardSituation" column="award_situation"/>
			<result property="contentFile" column="content_file"/>
			<result property="publishDate" column="publish_date"/>
			<result property="createdDate" column="created_date"/>
			<result property="lastUpdated" column="last_updated"/>
	</resultMap>
	
	<insert id="insertAchievement" parameterType="com.research.model.Achievement" useGeneratedKeys="true" keyProperty="id">
        <selectKey keyProperty="id" order="AFTER" resultType="int">
            select LAST_INSERT_ID() AS id
        </selectKey>
        INSERT INTO research_achievement (project_name, project_man, award_situation, content_file,
        publish_date, created_date, last_updated)
        VALUES (#{projectName},#{projectMan},#{awardSituation},#{contentFile},#{publishDate},#{createdDate},#{lastUpdated})
    </insert>
    
    <delete id="deleteAchievementById"  parameterType="com.research.model.Achievement">
    	DELETE FROM research_achievement
    	WHERE id = #{id}
    </delete>
    
    <update id="updateAchievementById" parameterType="com.research.model.Achievement">
    	UPDATE research_achievement
    	SET project_name = #{projectName}, project_man = #{projectMan}, award_situation = #{awardSituation},
    	content_file = #{contentFile}, publish_date = #{publishDate},
    	created_date = #{createdDate}, lastUpdated = #{lastUpdated}
    </update>
    
    <select id="getAchievementById" resultMap="AchievementResult">
    	SELECT id,project_name, project_mane, award_situation, conent_file,
        publish_date, created_date, last_updated
        FROM research_achievement
        WHERE id = #{id}
    </select>
    
    <select id="getAchievements" resultMap="AchievementResult">
    	SELECT id, project_name, project_man, award_situation, content_file, publish_date, 
    	created_date, last_updated
    	FROM research_achievement
    	LIMIT #{pageIndex}, #{pageSize}
    </select>
	
	<select id="getAchievementCounts">
		SELECT count(1)
		FROM research_achievement
	</select>
	

</mapper>