<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>注册页</title>
	<link rel="stylesheet" href="public/css/reset.css">
	<link rel="stylesheet" href="public/css/login.css">
</head>
<body>
	<header>
		<div class="header-top-bar">
			
		</div>
	</header>
	<div class="form container">
		<form action="#" id="researchUserLoginForm">
			<p>登录</p>
			<div class="form-group">
			    <label for="user-name">用户名：</label>
			    <input type="text" name="username" class="form-control text" id="user-name" placeholder="name...">
			</div>
			<div class="form-group">
			    <label for="user-password">密码：</label>
			    <input type="password" name="password" class="form-control text" id="user-password" placeholder="password...">
			</div>
			<button type="submit" class="btn" onclick="research_user_login()">登陆</button>
			<a href="register.html">注册>>></a>
		</form>
	</div>
	<footer>
		<div class="foot">
			
		</div>
	</footer>

	<script type="application/javascript" src="/js/bootstrap.min.js"></script>
	<script type="application/javascript" src="/js/jquery.min.js"></script>
	<script type="application/javascript" src="/js/jquery.cookie.js"></script>

<script type="application/javascript">
function research_user_login() {

	var username = $("#user-name").val();
	var password = $("#user-password").val();

	var url="/user/login/";

	$.get(url, {"username":username,"password":password}, function(data) {
		if(data != null) {
			$.cookie("user_id", data.id, { expires: 7 });
			$.cookie("user_username", data.username, { expires: 7 });
			$.cookie("user_password", data.password, { expires: 7 });
			$.cookie("user_name", data.name, { expires: 7 });
			$.cookie("user_sex", data.sex, { expires: 7 });
			$.cookie("user_id_card", data.idCard, { expires: 7 });
			$.cookie("user_enable", data.enable, { expires: 7 });

			location.href = "/logged/index.html"
		} else {
			alert("用户名或密码不正确!")
		}
	});

	/*$.ajax({
		type: "GET",
		url: url,
		contentType: "application/json; charset=utf-8",
		data: JSON.stringify(requestBody),
		dataType: "json",
		success: function (message) {
			alert("ok " + message)

		},
		error: function (message) {
			alert("error !")
		}
	});*/

}




</script>

</body>
</html>