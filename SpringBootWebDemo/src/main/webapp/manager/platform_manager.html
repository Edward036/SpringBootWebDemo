<!DOCTYPE html>

<html lang="en">
  <head>
  <meta charset="UTF-8">
  <title>科研时政管理</title>
      <!-- <link href="http://cdn.bootcss.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">  -->
      
      <link rel="stylesheet" href="../public/css/reset.css">
      <link rel="stylesheet" href="../public/css/platform_manager.css">
      <link href="../public/css/markdown.css" rel="stylesheet">
      <link rel="stylesheet" href="/public/css/myproject.css">

      <link rel="stylesheet" href="/css/bootstrap.min.css">

  </head>
  <body>
    <header>
    <div class="header-top-bar">
      
      <div class="container">
        <nav>
          <ul class="nav-ul">
            <li class="pull-left"><a href="index.html">首页</a></li>      
            <li class="pull-left"><a href="policy.html">科技时政</a></li>
            <li class="pull-left"><a href="##">通知公告</a></li>
            <li class="pull-left"><a href="achievements.html">科研成果</a></li>
            <li class="pull-left"><a href="project.html">科研项目</a></li>
            
            <li class="pull-left"><a href="info.html">了解我们</a></li>
          </ul>
        </nav>
        <div class="pull-right log" id="log">
          <span>管理员：</span><a href="javascript:;" id="name"></a><img src="../public/images/sanjiao.png" alt="">
          
          <div class="box" id="box">
            <ul>
              <li><a href="report.html">申报项目</a></li>
              <li><a href="myproject.html">我的科研项目</a></li>
              <li><span></span></li>
              <li><a href="user_manager.html">用户管理</a></li>
              <li><a href="review_items.html">审核项目</a></li>
              <li><a href="platform_manager.html">平台内容管理</a></li>  
              <li><span></span></li>
              <li><a href="#" onclick="showUpdateUser()">修改密码</a></li>
                <li><a href="/login.html">注销</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

        <!-- 按钮触发模态框 -->
        <button class="btn btn-primary btn-lg" style="display: none;" id="search_user_update_modal" data-toggle="modal" data-target="#updateUserModal"></button>
        <div class="modal fade" id="updateUserModal" tabindex="-1" role="dialog" aria-labelledby="UserModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="updateUserModalLabels">修改密码</h4>
                    </div>

                    <div class="modal-body">
                        <form role="form"  action="">

                            <div class="form-group">
                                <label>新密码:</label>
                                <div>
                                    <input type="password" class="form-control" id="research_user_update_old_password"
                                           value=""  placeholder="请输入你的密码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>再输一次:</label>
                                <div>
                                    <input type="password" id="research_user_update_new_password" name="password" class="form-control"
                                           value=""  placeholder="请输入你的密码">
                                </div>
                            </div>

                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="updateUserById()">提交更改</button>
                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>

    </header>
    
    <aside>
      <div class="aside-con"> 
         <ul>
           <li><a href="javascript:;" class="nav-li">时政管理</a></li>
           <li><a href="javascript:;" class="nav-li">通知公告管理</a></li>
           <li><a href="javascript:;" class="nav-li">科研成果管理</a></li>
           <li><a href="javascript:;" class="nav-li">科研项目管理</a></li>
         </ul>
      </div>

    </aside>


    <!-- 时政管理 -->
    <div class="pannal-nav pannal-nav-1 show">
        <div class="position">位置><a href="##">时政管理</a></div>
        <div class="con-nav">
          <ul>
            <li><a href="javascript:;" class="policy-title-li">添加时政内容</a></li>
            <li><a href="javascript:;" class="policy-title-li">时政管理</a></li>
            
          </ul>
        </div>
        <div class="con">

          <div class="pannal-policy pannal-policy-1 show">
              <form action="" enctype="multipart/form-data" method="POST">
                  <div class="form-group">
                      <label for="research_politics_add_title">文章标题：</label>
                      <input type="text" id="research_politics_add_title" class="con-text">
                  </div>

                  <div class="form-group">
                      <label for="research_politics_add_content_file">必要内容文件上传：</label>
                      <input type="file" name="contentFile" id="research_politics_add_content_file">
                  </div>
                  <div class="form-group">

                    <div class="markdown">
                      <label>内容编辑区：</label>
                      <div class="edit">
                        <textarea id="research_politics_add_origin" oninput="this.editor.update()"
                                rows="15" cols="170" ></textarea>
                      </div>
                      <label>结果在这儿：</label>
                      <div id="preview-1" class="preview"> </div>
                    </div>
                  </div>
                  <!--<div class="form-group">
                      <label for="project-remark" class="area">备注：</label>
                      <textarea name="" class="form-control" id="project-remark" placeholder="备注......." rows="2" cols="80"></textarea>
                  </div>-->
                  <button type="button" onclick="addPolitics()" class="btn">发布</button>
            </form>
          </div>
           <div class="pannal-policy pannal-policy-2 hidden">
              <form action="#" class="search">
                  <div class="form-group">
                    <!-- <input type="text" class="form-control pull-left" placeholder="按条件查询..."> -->
                    <input list="conditions" id="condition1" name="condition" class="condition pull-left" placeholder="按条件查询...">
                    <datalist id="conditions">
                      <option value="所有">
                      <option value="最近一月">
                    </datalist>
                  </div>
                  <button type="button" onclick="getConditions(1)" class="btn">查询</button>
             

              </form> 
             <table class="table" >
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>发布时间</th>
                    <th>文章标题</th>
                    <th>发布人</th>
                    <th>操作</th>
                  </tr>
                </thead>

                <tbody id="tbody1">
                  
                   <tr>
                    <td></td>
                    <td>2016-12-13</td>
                    <td>SDSDAFFFASFFFFFASFASFASFF</td>
                    <td>李三</td>
                    <td>
                      <button type="submit" class="btn edit">修改</button>
                      <button type="submit" class="btn del">删除</button>
                    </td>
                  </tr>



                </tbody>
              </table>
              <div class="paging" id="paging1">
      
              </div>

           </div>
        </div>


        <!-- 按钮触发模态框 时政修改-->
        <button class="btn btn-primary btn-lg" style="display: none;" id="search_politics_update_modal" data-toggle="modal" data-target="#updatePoliticsModal"></button>
        <div class="modal fade" id="updatePoliticsModal" tabindex="-1" role="dialog" aria-labelledby="UserModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="updateUserModalLabel">修改时政</h4>
                    </div>

                    <div class="modal-body">
                        <form role="form" id=""
                              action="">

                            <input type="hidden" class="form-control"  id="research_politics_update_id"  name="id" value="" >

                            <div class="form-group">
                                <label>标题:</label>
                                <div>
                                    <input type="text" class="form-control" id="research_politics_update_title"
                                           name="title" value=""  placeholder="请输入你的标题">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>作者:</label>
                                <div>
                                    <input type="text" id="research_politics_update_author" name="author" class="form-control"
                                           value=""  placeholder="请输入你的作者">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>内容:</label>
                                <div>
                                           <textarea  id="research_politics_update_origin" name="origin" class="form-control"
                                                      rows="15" cols="100"      value=""  placeholder="请输入你的内容"></textarea>
                                </div>
                            </div>


                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" id="research_politics_update_close" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="updatePoliticsById()">提交更改</button>
                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>




    </div>

    <!-- 通知公告管理 -->
    <div class="pannal-nav pannal-nav-2 hidden" id="notice">
        <div class="position">位置><a href="##">通知公告管理</a></div>
        <div class="con-nav">
          <ul>
            <li><a href="javascript:;" class="notice-title-li">编辑通知公告</a></li>
            <li><a href="javascript:;" class="notice-title-li">通知公告管理</a></li>
            
          </ul>
        </div>
        <div class="con">
          <div class="pannal-notice pannal-notice-1 show">
            
              <div class="form-group">
                  <label for="research_notice_add_title">文章标题：</label>
                  <input type="text" id="research_notice_add_title" class="con-text">
              </div>
              <div class="form-group">
              
                <div class="markdown">
                  <label>内容编辑区：</label>
                  <div class="edit">
                    <textarea id="research_notice_add_content" oninput="this.editor.update()"
                            rows="15" cols="170" ></textarea>
                  </div>
                  <label>结果在这儿：</label>
                  <div id="preview-2" class="preview"> </div>
                </div>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="research_notice_add_type"  value="通知" checked>
                  通知
                </label>
              </div>
              <div class="radio">
                <label>
                  <input type="radio" name="research_notice_add_type" value="公告" checked>
                  公告
                </label>
              </div>

              <button type="button" onclick="addNotice()" class="btn">发布</button>
        </div>
        <div class="pannal-notice pannal-notice-2 hidden">
              <form action="#" class="search">
                  <div class="form-group">
                    
                    <input list="conditions" id="condition2" name="condition" class="condition pull-left" placeholder="按条件查询...">
                    <datalist id="conditions">
                      <option value="所有"></option>
                      <option value="最近一月"> </option>
                    </datalist>
                  </div>
                  <button type="button" onclick="getConditions(2)" class="btn">查询</button>
              </form> 
             <table class="table" id="table" >
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>发布时间</th>
                    <th>标题</th>
                    <th>发布者</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="tbody2">
                  <tr>
                    <td></td>
                    <td>2016-12-13</td>
                    <td>SDSDAFFFASFFFFFASFASFASFF</td>
                    <td>李三</td>
                    <td>
                      <button type="submit" class="btn edit">修改</button>
                      <button type="submit" class="btn del">删除</button>
                    </td>
                  </tr>

                </tbody>
              </table>
              <div class="paging" id="paging2"></div>
         
          </div>
        </div>

        <!-- 按钮触发模态框 时政修改-->
        <button class="btn btn-primary btn-lg" style="display: none;" id="search_notice_update_modal" data-toggle="modal" data-target="#updateNoticeModal"></button>
        <div class="modal fade" id="updateNoticeModal" tabindex="-1" role="dialog" aria-labelledby="UserModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="updateNoticeModalLabel">修改通知公告</h4>
                    </div>

                    <div class="modal-body">
                        <form role="form"
                              action="">

                            <input type="hidden" class="form-control"  id="research_notice_update_id"  name="id" value="" >

                            <div class="form-group">
                                <label>标题:</label>
                                <div>
                                    <input type="text" class="form-control" id="research_notice_update_title"
                                           name="title" value=""  placeholder="请输入你的标题">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>作者:</label>
                                <div>
                                    <input type="text" id="research_notice_update_publisher" name="publisher" class="form-control"
                                           value=""  placeholder="请输入你的作者">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>内容:</label>
                                <div>
                                           <textarea  id="research_notice_update_content" name="content" class="form-control"
                                                      rows="15" cols="100"      value=""  placeholder="请输入你的内容"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>类型:</label>
                                <div>
                                    <select id="research_notice_update_type" name="type">
                                        <option value="通知" selected="selected">通知</option>
                                        <option value="公告">公告</option>
                                    </select>
                                </div>
                            </div>


                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" id="research_notice_update_close" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="updateNoticeById()">提交更改</button>
                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>



    </div>

    <!-- 科研成果管理 -->
    <div class="pannal-nav pannal-nav-3 hidden">
        <div class="position">位置><a href="#">科技成果文章管理</a></div>
        <div class="con-nav">
          <ul>
            <li><a href="javascript:;" class="ach-title-li">编辑科技成果文章</a></li>
            <li><a href="javascript:;" class="ach-title-li">科技成果文章管理</a></li>
            
          </ul>
        </div>
        <div class="con">
          <div class="pannal-ach pannal-ach-1 show">

              <form id="research_achievement_add_form1" enctype="multipart/form-data">
                  <div class="form-group">
                      <label >文章标题：</label>
                      <input type="text" name="projectName" id="research_achievement_add_project_name" class="con-text">
                  </div>


                  <div class="form-group">
                      <label for="research_achievement_add_content_file">必要内容文件上传：</label>
                      <input type="file" name="contentFile" id="research_achievement_add_content_file">
                  </div>

                  <div class="form-group">
                      <label for="research_achievement_add_images">封面上传：</label>
                      <input type="file" name="images" id="research_achievement_add_images">
                  </div>

                    <div class="markdown">
                      <label>内容编辑区：</label>
                      <div class="edit">
                        <textarea id="research_achievement_add_content" name="content" oninput="this.editor.update()"
                                rows="15" cols="170" ></textarea>
                      </div>
                        <label>获奖情况：</label>
                    <div class="edit">
                        <textarea id="research_achievement_add_award_situation"
                                 name="awardSituation" rows="10" cols="170" ></textarea>
                    </div>
                      <label>结果在这儿：</label>
                      <div id="preview-3" class="preview" > </div>
                    </div>



                <button type="button" onclick="addAchievement()" class="btn">发布</button>
              </form>


          </div>

          <div class="pannal-ach pannal-ach-2 hidden">
              <form action="#" class="search">
                  <div class="form-group">
                    
                    <input list="conditions" id="condition3" name="condition" class="condition pull-left" placeholder="按条件查询...">
                    <datalist id="conditions">
                      <option value="所有"></option>
                      <option value="最近一月"> </option>
                    </datalist>
                  </div>
                  <button type="button" onclick="getConditions(3)" class="btn">查询</button>
              </form> 
             <table class="table"  >
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>发布时间</th>
                    <th>标题</th>
                    <th>获奖情况  </th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="tbody3">
                  <tr>
                    <td></td>
                    <td>2016-12-13</td>
                    <td>SDSDAFFFASFFFFFASFASFASFF</td>
                    <td>  </td>
                    <td>李三，王二</td>

                    <td>
                      <button type="submit" class="btn edit">修改</button>
                      <button type="submit" class="btn del">删除</button>
                    </td>
                  </tr>
                 
                </tbody>
              </table>
              <div class="paging" id="paging3"></div>
         
            </div>
        </div>

        <!-- 按钮触发模态框 时政修改-->
        <button class="btn btn-primary btn-lg" style="display: none;" id="search_achievement_update_modal" data-toggle="modal" data-target="#updateAchievementModal"></button>
        <div class="modal fade" id="updateAchievementModal" tabindex="-1" role="dialog" aria-labelledby="UserModal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="updateAchievementModalLabel">修改科研成果</h4>
                    </div>

                    <div class="modal-body">
                        <form enctype="multipart/form-data" method="POST">

                            <input type="hidden" class="form-control"  id="research_achievement_update_id"  name="id" value="" >

                            <div class="form-group">
                                <label>标题:</label>
                                <div>
                                    <input type="text" class="form-control" id="research_achievement_update_project_name"
                                           name="title" value=""  placeholder="请输入你的标题">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>作者:</label>
                                <div>
                                    <input type="text" id="research_achievement_update_project_man" name="projectMan" class="form-control"
                                           value=""  placeholder="请输入你的作者">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>内容:</label>
                                <div>
                                       <textarea  id="research_achievement_update_content" name="content" class="form-control"
                                                  rows="10" cols="100"      value=""  placeholder="请输入你的内容"></textarea>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>获奖情况:</label>
                                <div>
                                       <textarea  id="research_achievement_update_award_situation" name="awardSituation" class="form-control"
                                                  rows="10" cols="100"      value=""  placeholder="请输入你的获奖情况"></textarea>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>封面照片:</label>
                                <div>
                                    <input type="file" id="research_achievement_update_images" name="images" class="form-control">
                                </div>
                            </div>

                        </form>

                    </div>
                    <div class="modal-footer">
                        <button type="button" id="research_achievement_update_close" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="button" class="btn btn-primary" onclick="updateAchievementById()">提交更改</button>
                    </div>

                </div><!-- /.modal-content -->
            </div><!-- /.modal -->
        </div>


    </div>

    <!-- 项目管理 -->
   <div class="pannal-nav pannal-nav-4 hidden">
            <div class="position">位置><a href="##">项目管理</a></div>
            <form action="#" class="search">
                  <div class="form-group">
                    <input list="conditions" id="condition4" name="condition" class="condition pull-left" placeholder="按条件查询...">
                    <datalist id="conditions">
                      <option value="所有"></option>
                      <option value="最近一月"> </option>
                    </datalist>
                  </div>
                  <button type="button" onclick="getConditions(4)" class="btn">查询</button>
              </form>

             <table class="table" >
                <thead>
                  <tr>
                    <th>序号</th>
                    <th>发布时间</th>
                    <th>项目名称</th>
                    <th>项目文件</th>
                    <th>项目申请者</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="tbody4">

                  <tr>
                    <td></td>
                    <td>2016-12-13</td>
                    <td>SDSDAFFFASFFFFFASFASFASFF</td>
                    <td><a href="##"><span class="download" title="下载"></span></a></td>
                    <td>李三，王二小</td>
                    
                    <td>
                      <button type="submit" class="btn check">审阅</button>
                      <button type="submit" class="btn del">删除</button>
                    </td>
                  </tr>
                 
                </tbody>
              </table>
              <div class="paging" id="paging4">


              </div>
    </div>






   
    <script src="../public/js/markdown.js"></script>
    <script src='../public/js/paging1.js'></script>
     <script src='../public/js/tab2.js'></script>
     <script src='../public/js/tab1.js'></script>
     <script src='../public/js/tab3.js'></script>
     <script src='../public/js/paging2.js'></script>
     <script src='../public/js/tab4.js'></script>
     <script src='../public/js/paging3.js'></script>
     <script src='../public/js/paging4.js'></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script type="application/javascript" src="/js/jquery.cookie.js"></script>
    <script type="application/javascript" src="/js/ajaxfileupload.js"></script>

    <script type="text/javascript">
         document.write( "<script language=javascript src='../public/js/box.js'><\/script>");
         window.onload=function(){
             $("#name").text($.cookie("user_name"));

             initData();

             var enable = $.cookie("user_enable");
             if(enable != 1){
                 location.href = "/login.html";
             }


            function Editor(input, preview) {
              this.update = function () {
                preview.innerHTML = markdown.toHTML(input.value);
              };
              input.editor = this;
               this.update();
        }

        var text = function (id) { return document.getElementById(id); };
            new Editor(text("research_politics_add_origin"), text("preview-1"));
            new Editor(text("research_notice_add_content"), text("preview-2"));
            new Editor(text("research_achievement_add_content"), text("preview-3"));

        function fixed(){
            var aside=document.getElementsByTagName('aside')[0];
            var aCon=document.getElementsByClassName('con');
            for(var i=0;i<aCon.length;i++){
              aCon[i].style.height=document.documentElement.clientHeight-125+'px';
            }
            aside.style.height=document.documentElement.clientHeight-36+'px';
            window.onresize=function(){
              aside.style.height=document.documentElement.clientHeight-36+'px';
              for(var i=0;i<aCon.length;i++){
              aCon[i].style.height=document.documentElement.clientHeight-125+'px';
            }
            }
          }
          fixed();
      }



         function initData(conditions){

             initProjects(conditions);
             initPolitics(conditions);
             initNotice(conditions);
             initAchievements(conditions);
         }

         function initPolitics(conditions) {

             if(conditions == "最近一月") {
                 conditions = "recent";
             } else {
                 conditions = "all"
             }

             var politicsUrl = "/politics/queryAll"

             $("#tbody1").empty();

             $.get(politicsUrl,{conditions:conditions},function(data) {
                 if(data != null) {
                     var str = "";
                     for(var i=0;i<data.length;i++) {
                         str += "<tr><td></td><td>"+UnixToDate(data[i].date)+"</td><td>"+data[i].title+"</td><td>"+data[i].author+"</td><td><button type='button' onclick=getPoliticsById("+data[i].id+") class='edit'>修改</button> <button type='button' onclick=deletePoliticsById("+data[i].id+") class='del'>删除</button></td></tr>";
                     }
                     if(str.length > 0) {
                         $("#tbody1").append(str);
                         initPoliticsPages();
                     }else {
                         $("#paging1").empty();
                     }

                 } else {
                     alert("error!")
                 }
             });
         }

         function initPoliticsPages() {
             $("#paging1").empty();

             var tbody=document.getElementById('tbody1');
             var atr=tbody.getElementsByTagName('tr');
             var pages=Math.ceil(atr.length/12);

             var paging=document.getElementById('paging1');
             for(var i=0;i<atr.length;i++){
                 atr[i].firstElementChild.innerHTML=i+1;

             }

             //分页，添加页码
             for(var i=1;i<=pages;i++){

                 // a[0].style.backgroundColor="";
                 // a[0].style.color="#252525";

                 if(pages>6){

                     for(var i=1;i<=5;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }

                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";


                     var nodeS=document.createElement("span");
                     var ellipsis=document.createTextNode('...');
                     nodeS.appendChild(ellipsis);
                     paging.appendChild(nodeS);

                     var nodeAEnd=document.createElement("a");
                     var textEnd=document.createTextNode(pages);
                     nodeAEnd.appendChild(textEnd);
                     paging.appendChild(nodeAEnd);
                     break;
                 }
                 if(pages<=6){
                     for(var i=1;i<=pages;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }
                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";
                     for(var i=12;i<atr.length;i++){
                         atr[i].style.display='none';
                     }

                 }
             }

             function page(){
                 var a=paging.getElementsByTagName("a");

                 for(var j=0;j<a.length;j++){

                     a[j].onclick=function(){
                         var num=parseInt(this.innerHTML);
                         if(num<=5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var num=parseInt(num);
                                 for(var i=1;i<=5;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }
                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);

                                 var nodeAEnd=document.createElement("a");
                                 var textEnd=document.createTextNode(pages);
                                 nodeAEnd.appendChild(textEnd);
                                 paging.appendChild(nodeAEnd);


                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }
                             else{
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }
                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }

                         }
                         if(num>=5&&num<=pages-5){
                             paging.innerHTML='';
                             var nodeAFirst=document.createElement('a');
                             var textFirst=document.createTextNode('1');
                             nodeAFirst.appendChild(textFirst);
                             paging.appendChild(nodeAFirst);


                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);



                             for(var i=num-2;i<=num+2;i++){
                                 var nodeA=document.createElement("a");
                                 var textNode=document.createTextNode(i);
                                 nodeA.appendChild(textNode);
                                 paging.appendChild(nodeA);
                             }

                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);

                             var nodeAEnd=document.createElement("a");
                             var textEnd=document.createTextNode(pages);
                             nodeAEnd.appendChild(textEnd);
                             paging.appendChild(nodeAEnd);

                             a[3].style.backgroundColor="#fa3e3e";
                             a[3].style.color="#ffffff";
                         }

                         if(num>pages-5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var nodeAFirst=document.createElement('a');
                                 var textFirst=document.createTextNode('1');
                                 nodeAFirst.appendChild(textFirst);
                                 paging.appendChild(nodeAFirst);


                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);


                                 for(var i=num-5+pages-num;i<=pages;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }

                                 var index=parseInt(num-1);
                                 a[7-pages+index].style.backgroundColor="#fa3e3e";
                                 a[7-pages+index].style.color="#ffffff";
                             }
                             if(num==6){
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }

                                 a[5].style.backgroundColor="#fa3e3e";
                                 a[5].style.color="#ffffff";
                             }
                         }
                         numTr=atr.length;
                         if(num===1){
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';

                             }
                             for(var i=12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num>1&&num<numTr){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';


                             }
                             for(var i=num*12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num===pages){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<numTr;i++){
                                 atr[i].style.display='table-row';

                             }
                         }
                         page();
                     }

                 }
             }
             page();
         }

         function initNotice(conditions) {

             if(conditions == "最近一月") {
                 conditions = "recent";
             } else {
                 conditions = "all"
             }

             $("#tbody2").empty();

             var noticeUrl = "/notice/queryAll"

             $.get(noticeUrl,{conditions:conditions},function(data) {
                 if(data != null) {
                     var str = "";
                     for(var i=0;i<data.length;i++) {
                         str += "<tr><td></td><td>"+UnixToDate(data[i].publishDate)+"</td><td>"+data[i].title+"</td><td>"+data[i].publisher+"</td><td><button type='button' onclick=getNoticeById("+data[i].id+") class='edit'>修改</button> <button type='button' onclick=deleteNoticeById("+data[i].id+") class='del'>删除</button></td></tr>";
                     }
                     if(str.length > 0) {
                         $("#tbody2").append(str);
                         initNoticePages();
                     }else {
                         $("#paging2").empty();
                     }

                 } else {
                     alert("error!")
                 }
             });
         }

         function initNoticePages() {
             $("#paging2").empty();

             var tbody=document.getElementById('tbody2');
             var atr=tbody.getElementsByTagName('tr');
             var pages=Math.ceil(atr.length/12);

             var paging=document.getElementById('paging2');
             for(var i=0;i<atr.length;i++){
                 atr[i].firstElementChild.innerHTML=i+1;

             }

             //分页，添加页码
             for(var i=1;i<=pages;i++){

                 // a[0].style.backgroundColor="";
                 // a[0].style.color="#252525";

                 if(pages>6){

                     for(var i=1;i<=5;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }

                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";


                     var nodeS=document.createElement("span");
                     var ellipsis=document.createTextNode('...');
                     nodeS.appendChild(ellipsis);
                     paging.appendChild(nodeS);

                     var nodeAEnd=document.createElement("a");
                     var textEnd=document.createTextNode(pages);
                     nodeAEnd.appendChild(textEnd);
                     paging.appendChild(nodeAEnd);
                     break;
                 }
                 if(pages<=6){
                     for(var i=1;i<=pages;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }
                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";
                     for(var i=12;i<atr.length;i++){
                         atr[i].style.display='none';
                     }

                 }
             }

             function page(){
                 var a=paging.getElementsByTagName("a");

                 for(var j=0;j<a.length;j++){

                     a[j].onclick=function(){
                         var num=parseInt(this.innerHTML);
                         if(num<=5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var num=parseInt(num);
                                 for(var i=1;i<=5;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }
                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);

                                 var nodeAEnd=document.createElement("a");
                                 var textEnd=document.createTextNode(pages);
                                 nodeAEnd.appendChild(textEnd);
                                 paging.appendChild(nodeAEnd);


                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }
                             else{
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }
                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }

                         }
                         if(num>=5&&num<=pages-5){
                             paging.innerHTML='';
                             var nodeAFirst=document.createElement('a');
                             var textFirst=document.createTextNode('1');
                             nodeAFirst.appendChild(textFirst);
                             paging.appendChild(nodeAFirst);


                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);



                             for(var i=num-2;i<=num+2;i++){
                                 var nodeA=document.createElement("a");
                                 var textNode=document.createTextNode(i);
                                 nodeA.appendChild(textNode);
                                 paging.appendChild(nodeA);
                             }

                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);

                             var nodeAEnd=document.createElement("a");
                             var textEnd=document.createTextNode(pages);
                             nodeAEnd.appendChild(textEnd);
                             paging.appendChild(nodeAEnd);

                             a[3].style.backgroundColor="#fa3e3e";
                             a[3].style.color="#ffffff";
                         }

                         if(num>pages-5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var nodeAFirst=document.createElement('a');
                                 var textFirst=document.createTextNode('1');
                                 nodeAFirst.appendChild(textFirst);
                                 paging.appendChild(nodeAFirst);


                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);


                                 for(var i=num-5+pages-num;i<=pages;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }

                                 var index=parseInt(num-1);
                                 a[7-pages+index].style.backgroundColor="#fa3e3e";
                                 a[7-pages+index].style.color="#ffffff";
                             }
                             if(num==6){
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }

                                 a[5].style.backgroundColor="#fa3e3e";
                                 a[5].style.color="#ffffff";
                             }
                         }
                         numTr=atr.length;
                         if(num===1){
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';

                             }
                             for(var i=12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num>1&&num<numTr){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';


                             }
                             for(var i=num*12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num===pages){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<numTr;i++){
                                 atr[i].style.display='table-row';

                             }
                         }
                         page();
                     }

                 }
             }
             page();
         }

         function initAchievements(conditions) {

             if(conditions == "最近一月") {
                 conditions = "recent";
             } else {
                 conditions = "all"
             }

             $("#tbody3").empty();

             var achievementUrl = "/achievement/queryAll"

             $.get(achievementUrl,{conditions:conditions},function(data) {
                 if(data != null) {
                     var str = "";
                     for(var i=0;i<data.length;i++) {
                         str += "<tr><td></td><td>"+UnixToDate(data[i].publishDate)+"</td><td>"+data[i].projectName+"</td><td>"+data[i].projectMan+"</td><td><button type='button' onclick=getAchievementById("+data[i].id+") class='edit'>修改</button> <button type='button' onclick=deleteAchievementById("+data[i].id+") class='del'>删除</button></td></tr>";
                     }
                     if(str.length > 0) {
                         $("#tbody3").append(str);
                         initAchievementsPages();
                     }else {
                         $("#paging3").empty();
                     }

                 } else {
                     alert("error!")
                 }
             });
         }

         function initAchievementsPages() {
             $("#paging3").empty();

             var tbody=document.getElementById('tbody3');
             var atr=tbody.getElementsByTagName('tr');
             var pages=Math.ceil(atr.length/12);

             var paging=document.getElementById('paging3');
             for(var i=0;i<atr.length;i++){
                 atr[i].firstElementChild.innerHTML=i+1;

             }

             //分页，添加页码
             for(var i=1;i<=pages;i++){

                 // a[0].style.backgroundColor="";
                 // a[0].style.color="#252525";

                 if(pages>6){

                     for(var i=1;i<=5;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }

                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";


                     var nodeS=document.createElement("span");
                     var ellipsis=document.createTextNode('...');
                     nodeS.appendChild(ellipsis);
                     paging.appendChild(nodeS);

                     var nodeAEnd=document.createElement("a");
                     var textEnd=document.createTextNode(pages);
                     nodeAEnd.appendChild(textEnd);
                     paging.appendChild(nodeAEnd);
                     break;
                 }
                 if(pages<=6){
                     for(var i=1;i<=pages;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }
                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";
                     for(var i=12;i<atr.length;i++){
                         atr[i].style.display='none';
                     }

                 }
             }

             function page(){
                 var a=paging.getElementsByTagName("a");

                 for(var j=0;j<a.length;j++){

                     a[j].onclick=function(){
                         var num=parseInt(this.innerHTML);
                         if(num<=5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var num=parseInt(num);
                                 for(var i=1;i<=5;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }
                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);

                                 var nodeAEnd=document.createElement("a");
                                 var textEnd=document.createTextNode(pages);
                                 nodeAEnd.appendChild(textEnd);
                                 paging.appendChild(nodeAEnd);


                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }
                             else{
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }
                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }

                         }
                         if(num>=5&&num<=pages-5){
                             paging.innerHTML='';
                             var nodeAFirst=document.createElement('a');
                             var textFirst=document.createTextNode('1');
                             nodeAFirst.appendChild(textFirst);
                             paging.appendChild(nodeAFirst);


                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);



                             for(var i=num-2;i<=num+2;i++){
                                 var nodeA=document.createElement("a");
                                 var textNode=document.createTextNode(i);
                                 nodeA.appendChild(textNode);
                                 paging.appendChild(nodeA);
                             }

                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);

                             var nodeAEnd=document.createElement("a");
                             var textEnd=document.createTextNode(pages);
                             nodeAEnd.appendChild(textEnd);
                             paging.appendChild(nodeAEnd);

                             a[3].style.backgroundColor="#fa3e3e";
                             a[3].style.color="#ffffff";
                         }

                         if(num>pages-5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var nodeAFirst=document.createElement('a');
                                 var textFirst=document.createTextNode('1');
                                 nodeAFirst.appendChild(textFirst);
                                 paging.appendChild(nodeAFirst);


                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);


                                 for(var i=num-5+pages-num;i<=pages;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }

                                 var index=parseInt(num-1);
                                 a[7-pages+index].style.backgroundColor="#fa3e3e";
                                 a[7-pages+index].style.color="#ffffff";
                             }
                             if(num==6){
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }

                                 a[5].style.backgroundColor="#fa3e3e";
                                 a[5].style.color="#ffffff";
                             }
                         }
                         numTr=atr.length;
                         if(num===1){
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';

                             }
                             for(var i=12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num>1&&num<numTr){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';


                             }
                             for(var i=num*12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num===pages){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<numTr;i++){
                                 atr[i].style.display='table-row';

                             }
                         }
                         page();
                     }

                 }
             }
             page();
         }

         function initProjects(conditions){

             if(conditions == "最近一月") {
                 conditions = "recent";
             } else {
                 conditions = "all"
             }

             var projectUrl = "/project/queryAll"

             $("#tbody4").empty();
             $.get(projectUrl,{conditions:conditions},function(data) {
                 if(data != null) {
                     var str = "";
                     for(var i=0;i<data.length;i++) {
                         str += "<tr><td></td><td>"+UnixToDate(data[i].declareTime)+"</td><td>"+data[i].title+"</td><td><a href='/upload/project/"+data[i].applicant+"/"+data[i].projectFile+"'><span class='download' title='下载'></span></a></td><td>"+data[i].applicant+"</td><td><button type='button' onclick=getProjectById("+data[i].id+") class='edit'>审阅</button> <button type='button' onclick=deleteProjectById("+data[i].id+") class='del'>删除</button></td></tr>";
                     }
                     if(str.length > 0) {
                         $("#tbody4").append(str);
                         initProjectPages();
                     }else {
                         $("#paging4").empty();
                     }

                 } else {
                     alert("error!")
                 }
             });

         }

         function initProjectPages() {
             $("#paging4").empty();

             var tbody=document.getElementById('tbody4');
             var atr=tbody.getElementsByTagName('tr');
             var pages=Math.ceil(atr.length/12);

             var paging=document.getElementById('paging4');
             for(var i=0;i<atr.length;i++){
                 atr[i].firstElementChild.innerHTML=i+1;

             }

             //分页，添加页码
             for(var i=1;i<=pages;i++){

                 // a[0].style.backgroundColor="";
                 // a[0].style.color="#252525";

                 if(pages>6){

                     for(var i=1;i<=5;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }

                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";


                     var nodeS=document.createElement("span");
                     var ellipsis=document.createTextNode('...');
                     nodeS.appendChild(ellipsis);
                     paging.appendChild(nodeS);

                     var nodeAEnd=document.createElement("a");
                     var textEnd=document.createTextNode(pages);
                     nodeAEnd.appendChild(textEnd);
                     paging.appendChild(nodeAEnd);
                     break;
                 }
                 if(pages<=6){
                     for(var i=1;i<=pages;i++){
                         var nodeA=document.createElement("a");
                         var textNode=document.createTextNode(i);
                         nodeA.appendChild(textNode);
                         paging.appendChild(nodeA);

                     }
                     var a=paging.getElementsByTagName('a');
                     a[0].style.backgroundColor="#fa3e3e";
                     a[0].style.color="#ffffff";
                     for(var i=12;i<atr.length;i++){
                         atr[i].style.display='none';
                     }

                 }
             }

             function page(){
                 var a=paging.getElementsByTagName("a");

                 for(var j=0;j<a.length;j++){

                     a[j].onclick=function(){
                         var num=parseInt(this.innerHTML);
                         if(num<=5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var num=parseInt(num);
                                 for(var i=1;i<=5;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }
                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);

                                 var nodeAEnd=document.createElement("a");
                                 var textEnd=document.createTextNode(pages);
                                 nodeAEnd.appendChild(textEnd);
                                 paging.appendChild(nodeAEnd);


                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }
                             else{
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }
                                 var index=parseInt(num-1);
                                 a[index].style.backgroundColor="#fa3e3e";
                                 a[index].style.color="#ffffff";
                             }

                         }
                         if(num>=5&&num<=pages-5){
                             paging.innerHTML='';
                             var nodeAFirst=document.createElement('a');
                             var textFirst=document.createTextNode('1');
                             nodeAFirst.appendChild(textFirst);
                             paging.appendChild(nodeAFirst);


                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);



                             for(var i=num-2;i<=num+2;i++){
                                 var nodeA=document.createElement("a");
                                 var textNode=document.createTextNode(i);
                                 nodeA.appendChild(textNode);
                                 paging.appendChild(nodeA);
                             }

                             var nodeS=document.createElement("span");
                             var ellipsis=document.createTextNode('...');
                             nodeS.appendChild(ellipsis);
                             paging.appendChild(nodeS);

                             var nodeAEnd=document.createElement("a");
                             var textEnd=document.createTextNode(pages);
                             nodeAEnd.appendChild(textEnd);
                             paging.appendChild(nodeAEnd);

                             a[3].style.backgroundColor="#fa3e3e";
                             a[3].style.color="#ffffff";
                         }

                         if(num>pages-5){
                             if(pages>6){
                                 paging.innerHTML='';
                                 var nodeAFirst=document.createElement('a');
                                 var textFirst=document.createTextNode('1');
                                 nodeAFirst.appendChild(textFirst);
                                 paging.appendChild(nodeAFirst);


                                 var nodeS=document.createElement("span");
                                 var ellipsis=document.createTextNode('...');
                                 nodeS.appendChild(ellipsis);
                                 paging.appendChild(nodeS);


                                 for(var i=num-5+pages-num;i<=pages;i++){
                                     var nodeA=document.createElement("a");
                                     var textNode=document.createTextNode(i);
                                     nodeA.appendChild(textNode);
                                     paging.appendChild(nodeA);
                                 }

                                 var index=parseInt(num-1);
                                 a[7-pages+index].style.backgroundColor="#fa3e3e";
                                 a[7-pages+index].style.color="#ffffff";
                             }
                             if(num==6){
                                 for(var i=0;i<a.length;i++){
                                     a[i].style.backgroundColor="";
                                     a[i].style.color="#252525";
                                 }

                                 a[5].style.backgroundColor="#fa3e3e";
                                 a[5].style.color="#ffffff";
                             }
                         }
                         numTr=atr.length;
                         if(num===1){
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';

                             }
                             for(var i=12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num>1&&num<numTr){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<num*12;i++){

                                 atr[i].style.display='table-row';


                             }
                             for(var i=num*12;i<numTr;i++){
                                 atr[i].style.display='none';

                             }
                         }
                         if(num===pages){
                             for(var i=0;i<(num-1)*12;i++){
                                 atr[i].style.display='none';

                             }
                             for(var i=(num-1)*12;i<numTr;i++){
                                 atr[i].style.display='table-row';

                             }
                         }
                         page();
                     }

                 }
             }
             page();
         }

         /**
          * @return {string}
          */
         function UnixToDate(unixTime) {
             var time = new Date(unixTime);
             var ymdhis = "";
             ymdhis += time.getUTCFullYear() + "-";
             ymdhis += (time.getUTCMonth()+1) + "-";
             ymdhis += time.getUTCDate();

             ymdhis += " " + time.getUTCHours() + ":";
             ymdhis += time.getUTCMinutes() + ":";
             ymdhis += time.getUTCSeconds();
             return ymdhis;
         }

         function getProjectById(id){
             var url="/project/"+id+"/";
             $.get(url, function(data) {
                 if(data != null) {

                     $.cookie("project_id",data.id);
                     $.cookie("project_title",data.title);
                     $.cookie("project_applicant",data.applicant);
                     $.cookie("project_auditState",data.auditState);
                     $.cookie("project_declareUnits",data.declareUnits);
                     $.cookie("project_summary",data.summary);
                     $.cookie("project_remark",data.remark);
                     $.cookie("project_projectFile",data.projectFile);
                     $.cookie("project_declareTime",UnixToDate(data.declareTime));
                     $.cookie("project_lastUpdated",UnixToDate(data.lastUpdated));
                     $.cookie("project_createdDate",UnixToDate(data.createdDate));
                     $.cookie("isManager", "true",{expires:1});
                     window.location.href = "review.html";
                 } else {
                     alert("该项目不存在");

                     window.location.href = "platform_manager.html";
                 }
             });

         }

         function getPoliticsById(id){
             var url="/politics/"+id+"/";
             $.get(url, function(data) {
                 if(data != null) {

                     $("#research_politics_update_id").val(data.id);
                     $("#research_politics_update_title").val(data.title);
                     $("#research_politics_update_author").val(data.author);
                     $("#research_politics_update_origin").val(data.origin);


                     $("#search_politics_update_modal").click();

                 } else {
                     alert("该项目不存在");

                     window.location.href = "platform_manager.html";
                 }
             });
         }

         function getNoticeById(id){
             var url="/notice/"+id+"/";
             $.get(url, function(data) {
                 if(data != null) {

                     $("#research_notice_update_id").val(data.id);
                     $("#research_notice_update_title").val(data.title);
                     $("#research_notice_update_publisher").val(data.publisher);
                     $("#research_notice_update_content").val(data.content);


                     $("#search_notice_update_modal").click();

                 } else {
                     alert("该项目不存在");

                     window.location.href = "platform_manager.html";
                 }
             });
         }

         function getAchievementById(id){
             var url="/achievement/"+id+"/";
             $.get(url, function(data) {
                 if(data != null) {

                     $("#research_achievement_update_id").val(data.id);
                     $("#research_achievement_update_project_name").val(data.projectName);
                     $("#research_achievement_update_project_man").val(data.projectMan);
                     $("#research_achievement_update_award_situation").val(data.awardSituation);
                     $("#research_achievement_update_content").val(data.content);

                     $("#search_achievement_update_modal").click();

                 } else {
                     alert("该项目不存在");

                     window.location.href = "platform_manager.html";
                 }
             });
         }

         function deleteAchievementById(id){
             var url="/achievement/delete";
             $.post(url,{id:id}, function(data) {
                 if(data != null) {
                     initAchievements();
                 } else {
                     alert("该项目不存在");
                     window.location.href = "platform_manager.html";
                 }
             });
         }

         function deleteProjectById(id){
             var url="/project/delete";
             $.post(url,{id:id}, function(data) {
                 if(data != null) {
                     initProjects();
                 } else {
                     alert("该项目不存在");
                     window.location.href = "platform_manager.html";
                 }
             });
         }

         function deletePoliticsById(id){
             var url="/politics/delete";
             $.post(url,{id:id}, function(data) {
                 if(data != null) {
                     initPolitics();
                 } else {
                     alert("该项目不存在");
                     window.location.href = "platform_manager.html";
                 }
             });

         }

         function deleteNoticeById(id){
             var url="/notice/delete";
             $.post(url,{id:id}, function(data) {
                 if(data != null) {
                     initNotice();
                 } else {
                     alert("该项目不存在");
                     window.location.href = "platform_manager.html";
                 }
             });

         }

         function updatePoliticsById(){
             var id = $("#research_politics_update_id").val();
             var title = $("#research_politics_update_title").val();
             var author = $("#research_politics_update_author").val();
             var origin = $("#research_politics_update_origin").val();

             if(id <= 0 || title == null || title.length == 0 || author == null || author.length == 0 ||
                     origin == null || origin.length == 0 ) {
                 alert("输入参数不能为空!")
             } else {
                 var url="/politics/update";
                 $.post(url,{id:id, title:title, author:author, origin:origin}, function(data) {
                     if(data != null) {
                         $("#research_politics_update_close").click();
                         initPolitics();

                     } else {
                         alert("该项目不存在");

                         window.location.href = "platform_manager.html";
                     }
                 });
             }
         }

         function updateAchievementById(){
             var id = $("#research_achievement_update_id").val();
             var projectName = $("#research_achievement_update_project_name").val();
             var projectMan = $("#research_achievement_update_project_man").val();
             var awardSituation = $("#research_achievement_update_award_situation").val();
             var content = $("#research_achievement_update_content").val();
             var images = $("#research_achievement_update_images").val();

             if(id <= 0 || projectName == null || projectName.length == 0 || projectMan == null || projectMan.length == 0 ||
                     awardSituation == null || awardSituation.length == 0 || content.length == 0 || content == null
                     || images.length == 0 || images == null) {
                 alert("输入参数不能为空!")
             } else {
                 $.ajaxFileUpload({
                     url: "http://127.0.0.1/achievement/update?id="+id+"&projectMan="+projectMan+"&projectName="+projectName+"&awardSituation="+awardSituation+"&content="+content,
                     type:'POST',
                     secureuri: false, //是否需要安全协议，一般设置为false
                     dataType: 'json', //返回值类型 一般设置为json
                     fileElementId:'research_achievement_update_images',
                     success: function (data, status){
                         if(data != null) {
                             alert("发布成功!")
                         } else {
                             alert("发布失败!")
                         }
                     },
                     error: function (data, status, e)//服务器响应失败处理函数
                     {
                         alert("error!");
                     }
                 });
             }
             if(id <= 0 || projectName == null || projectName.length == 0 || projectMan == null || projectMan.length == 0 ||
                     awardSituation == null || awardSituation.length == 0 || content.length == 0 || content == null
                     || images.length == 0 || images == null) {

             } else {
                 //2秒后执行
                 setTimeout( function(){
                     alert("修改成功!");
                     initAchievements();
                     $("#research_achievement_update_close").click();
                 }, 1 * 1000 );
             }

         }

         function updateNoticeById(){
             var id = $("#research_notice_update_id").val();
             var title = $("#research_notice_update_title").val();
             var publisher = $("#research_notice_update_publisher").val();
             var content = $("#research_notice_update_content").val();
             var type = $("#research_notice_update_type").val();

             if(id <= 0 || title == null || title.length == 0 || publisher == null || publisher.length == 0 ||
                     content == null || content.length == 0 || type == null || type.length == 0 ) {
                 alert("输入参数不能为空!")
             } else {
                 var url="/notice/update";
                 $.post(url,{id:id, title:title, publisher:publisher, content:content, type:type}, function(data) {
                     if(data != null) {
                         $("#research_notice_update_close").click();
                         initNotice();

                     } else {
                         alert("该项目不存在");

                         window.location.href = "platform_manager.html";
                     }
                 });
             }
         }


         function getConditions(count) {
             var condition = $("#condition"+count).val();
             initData(condition);
         }

         function addPolitics(){
             var author = $.cookie("user_name");
             if(author == null) {
                 location.href="/login.html";
             }
             var title =$("#research_politics_add_title").val();

             var origin = $("#research_politics_add_origin").val();
             var contentFile = $("#research_politics_add_content_file").val();

             if(title == null || title.length == 0 || origin == null || origin.length == 0 || contentFile == null || contentFile.length == 0
                     || author == null || author.length == 0) {
                 alert("所输入参数不能为空!");
             } else {
                 $.ajaxFileUpload({
                             url:'/politics/add?title='+title+'&author='+author+'&origin='+origin,
                             type:'POST',
                             secureuri: false, //是否需要安全协议，一般设置为false
                             dataType: 'json', //返回值类型 一般设置为json
                             fileElementId:'research_politics_add_content_file',
                             success: function (data, status){
                                 if(data != null) {
                                     alert("发布成功!")
                                     location.href="platform_manager.html";
                                 } else {
                                     alert("发布失败!")
                                 }
                             },
                             error: function (data, status, e)//服务器响应失败处理函数
                             {
                                 alert("error!");
                             }

                         }
                 );
                 if(title == null || title.length == 0 || origin == null || origin.length == 0 || contentFile == null || contentFile.length == 0
                         || author == null || author.length == 0) {

                 } else {
                     alert("申报成功!")
                     location.href="platform_manager.html";
                 }
             }
         }

         function addNotice(){
            var type = $('input[name="research_notice_add_type"]:checked ').val();

            var publisher = $.cookie("user_name");
            if(publisher == null) {
            location.href="/login.html";
            }
            var title =$("#research_notice_add_title").val();
            var content =$("#research_notice_add_content").val();

            if(type == null || type.length ==0 || publisher == null || publisher.length ==0 ||
                    title == null || title.length ==0 || content == null || content.length ==0 ) {
                alert("输入参数不能为空!");
            } else {
                var url = "/notice/add"
                $.post(url,{title:title, publisher:publisher, type: type, content: content}, function(data) {
                    if(data != null) {
                        alert("发布成功!")
                        location.href="platform_manager.html";
                    } else {
                        alert("发布失败!")
                    }
                });
            }


         }

         function addAchievement(){
             var projectMan = $.cookie("user_name");

             var projectName =$("#research_achievement_add_project_name").val();
             var awardSituation =$("#research_achievement_add_award_situation").val();
             var content =$("#research_achievement_add_content").val();
             var images = $("#research_achievement_add_images").val();
             var contentFile = $("#research_achievement_add_content_file").val();

             if(projectMan == null) {
                 location.href="/login.html";
             }

             if(images.length == 0 || contentFile.length == 0 || projectMan == null || projectMan.length ==0 || projectName == null || projectName.length ==0 ||
                     awardSituation == null || awardSituation.length ==0 || content == null || content.length ==0 ) {
                 alert("输入参数不能为空!");
             } else {
                 $.ajaxFileUpload({
                     url: "http://127.0.0.1/achievement/add?projectName="+projectName+"&projectMan="+projectMan+"&awardSituation="+awardSituation+"&content="+content,
                     type:'POST',
                     secureuri: false, //是否需要安全协议，一般设置为false
                     dataType: 'json', //返回值类型 一般设置为json
                     fileElementId:'research_achievement_add_content_file',
                     success: function (data, status){
                         if(data != null) {
                             alert("发布成功!")
                         } else {
                             alert("发布失败!")
                         }
                     },
                     error: function (data, status, e)//服务器响应失败处理函数
                     {
                         alert("error!");
                     }

                 });
             }

             if(images.length == 0 || contentFile.length == 0 || projectMan == null || projectMan.length ==0 || projectName == null || projectName.length ==0 ||
                     awardSituation == null || awardSituation.length ==0 || content == null || content.length ==0 ) {
                 alert("参数不能为空")
             } else {
                 //1秒后执行
                 setTimeout( function(){
                     addAchievement1();
                 }, 2 * 1000 );
             }

         }

         function addAchievement1(){

             var projectMan = $.cookie("user_name");
             var projectName =$("#research_achievement_add_project_name").val();

             var url = "/achievement/query"
             $.get(url, {projectName:projectName, projectMan:projectMan}, function(data) {
                 if(data != null) {
                     $.ajaxFileUpload({
                         url: "http://127.0.0.1/achievement/update?id="+data.id+"&projectMan="+data.projectMan,
                         type:'POST',
                         secureuri: false, //是否需要安全协议，一般设置为false
                         dataType: 'json', //返回值类型 一般设置为json
                         fileElementId:'research_achievement_add_images',
                         success: function (data, status){
                             if(data != null) {
                                 alert("发布成功!")
                             } else {
                                 alert("发布失败!")
                             }
                         },
                         error: function (data, status, e)//服务器响应失败处理函数
                         {
                             alert("error!");
                         }
                     });
                 } else {
                     alert("发布失败!")
                 }
             });

             alert("发布成功!!")
             location.href= "platform_manager.html";
         }

         function research_project_insert(){

         }

         function updateUserById(){
             var id = $.cookie("user_id")
             var oldPassword = $("#research_user_update_old_password").val();
             var newPassword = $("#research_user_update_new_password").val();
             if(oldPassword != newPassword) {
                 alert("两次输入密码不一致!")
             } else {
                 var url="/user/update";
                 $.post(url,{id:id, password:newPassword}, function(data) {
                     if(data != null) {

                         window.location.href = "platform_manager.html";

                     } else {
                         alert("该项目不存在");

                         window.location.href = "platform_manager.html";
                     }
                 });
             }
         }

         function showUpdateUser(){
             $("#search_user_update_modal").click();
         }

      </script>
  </body>
</html>